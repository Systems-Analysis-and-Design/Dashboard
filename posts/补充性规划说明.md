#### 修订历史
|版本|日期|描述|作者|
|---|---|---|---|
|补充草案|2018年5月29日|第一个草案，主要在细化阶段中进行精化|李佳|

---
#### 一、简介
本文档记录了皮皮怪点餐系统未在前面文档中描述的需求。

#### 二、功能性

1.错误处理

在项目推进中使用控制台记录日志，输出错误信息，分析并解决错误。

2.安全性

用户登录记录session，不可以直接输入网址跳过登录。

3.界面显示

菜单界面显示菜品分类和图片。

4.操作简化

后台管理可以一次修改多条信息，简化保存流程。

5.支付问题

根据要求，删除支付阶段的操作，直接显示支付成功提示。

#### 三、可用性

1.人性因素

用户在点菜时可以看到菜品的分类和图片，订单完成后可以进行评价。避免复杂的排列和流程对用户造成使用上的困扰。

2.快捷、无错的交易处理

3.数据库处理

由于数据库操作时循环+异步的原因，将数据库增删改移动至数据库模型文件中，在数据库打开一次的情况下完成本次所有修改，保证数据操作的正确。

#### 四、可靠性

1.正确性和可恢复性

订单操作失败时不能显示交易成功，不能将订单信息传递至后台写入数据库，要在订单确认支付成功后进行数据库写入；否则退回点菜订单页面。

2.性能

后台操作一条修改一次保存非常麻烦，因此将其改为多条修改，一次保存，简化操作流程，提高性能。

#### 五、可支持性

1.可适应性

不同用户的不同业务操作和处理需求要能很好的适应。

2.可配置性

项目完成后应当具备一定的可配置能力，对此需求需要进一步分析。

#### 六、框架约束

本次项目采用node.js+express+bootstrap4+mongodb框架，提高web应用开发的便捷性，提高可支持性能力。

#### 七、支付构件

根据要求，移除原本计划的支付接口，确认订单成功后直接跳转显示支付成功。

#### 八、接口

由于存在后台管理、用户点菜、厨师确认订单三种不同的处理需求和方式，我们需要接入不同的接口，采用不同的登录和验证方式。

#### 九、业务规则

在用户订单完成后，将这笔订单的总成本、总收入以及利润计算完成后传入后台管理系统，进行数据库记录，但是在前端用户页面只显示自己应付的价格，不显示其他无关数据。
